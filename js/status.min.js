function isUndefined(a){return void 0===a||null===a?!0:!1};var SORTING_TABLE_TEAM="TEAM",SORTING_TABLE_USER="USER",SORTING_COLUMN="_col",SORTING_DIRECTION="_dir",STORAGE_LANGUAGE="language";function storeSorting(a,b,c){if(!localStorageExists())return!1;localStorage.setItem(a+SORTING_COLUMN,b);localStorage.setItem(a+SORTING_DIRECTION,c)}function readSorting(a){if(!localStorageExists())return null;var b=[];b[0]=localStorage.getItem(a+SORTING_COLUMN);b[1]=localStorage.getItem(a+SORTING_DIRECTION);return isUndefined(b[0])||isUndefined(b[1])?null:b}
function storeLanguage(a){if(!localStorageExists())return!1;localStorage.setItem(STORAGE_LANGUAGE,a)}function readLanguage(a){if(!localStorageExists())return a;var b=localStorage.getItem(STORAGE_LANGUAGE);return isUndefined(b)?a:b}function localStorageExists(){try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}};function getSiteUrl(){var a,b="seti.nl/";g_siteUrl="";var c=window.location.href;c&&(a=c.indexOf(b),0<=a?g_siteUrl=c.substr(0,a+b.length):(b="localhost:8080/stats/",a=c.indexOf(b),0<=a&&(g_siteUrl=c.substr(0,a+b.length))))};LANGUAGE_ENGLISH="US";LANGUAGE_DUTCH="NL";var g_language;function language(){var a;g_language=readLanguage(LANGUAGE_ENGLISH);switch(g_language){case LANGUAGE_DUTCH:languageDutch();a="<img src='js/lib/flags/blank.png' class='flag flag-nl '/>";break;default:languageEnglish(),a="<img src='js/lib/flags/blank.png' class='flag flag-us '/>"}$("#flag_selected_language").html(a)}
function languageToggle(){g_language==LANGUAGE_ENGLISH?storeLanguage(LANGUAGE_DUTCH):storeLanguage(LANGUAGE_ENGLISH);location.reload()}
function languageEnglish(){table_team_rac="Team RAC";table_team_total="Team Total";table_name="Name";table_total="Total";table_rac="RAC";table_country="Country";table_members="Members";table_country_rac="Country RAC";table_country_total="Country Total";table_world_rac="World RAC";table_world_total="World Total";overtake="Overtake";table_team="Team";table_lang_file="";text_credits="Credits";text_credits_future="Credits in the future";text_solid_line="Solid line: ";text_dash_line="Dashed lijn: ";text_cedit_future=
"Credits in the future ";text_tool_users="'Show user list'";text_one_team="Team: ";text_all_teams="All teams";text_all_users="All users";text_all_countries="All countries";text_one_country="Country: ";text_table_info="Info";text_table_status="Status";txt_stat_head_zero="Zero Day update";txt_stat_head_all="Daily update";txt_stat_head_user="Daily user update";txt_stat_head_team="Daily team update";txt_stat_head_post="Post processing";txt_stat_started="Started on:";txt_stat_processed="Processed in:";
txt_stat_status="State:";txt_stat_user="User:";txt_stat_processed_nr="Processed:";txt_stat_processed_last="Last processed on:";txt_stat_error_zero="Errors:";txt_stat_checked_time="Last checked on:";txt_stat_error_user="Error/ status user:";txt_stat_error_team="Error/ status team:";txt_stat_error_all="Error total:";txt_stat_data_read="Data read in:";txt_stat_data_processed="Data processed in:";txt_stat_data_added="Data added in";txt_stat_data_time="Data time stamp:";txt_processing_zero_wait="Waiting for the next update";
txt_processing_zero_run="Running";txt_processing_users="Processing users";txt_processing_teams="Processing teams";txt_stat_post="To do:";txt_stat_busy="Now processing:";txt_update_status1="Status will be automatically updated in ";txt_update_stauts2=" seconds";txt_update_now="Updating ...";txt_todo_gen_lists="Generate new lists";txt_progress_snl="Building S@NL list";txt_progress_build_users="Building users list for: ";txt_progress_build_all_team="Building all users list";txt_progress_build_all_country=
"Building country list";text_graph_first_time="<b>Click on one of the rows to show graphs</b>"}
function languageDutch(){table_team_rac="Team RAC";table_team_total="Team Totaal";overtake="Inhalen";table_name="Naam";table_total="Totaal";table_rac="RAC";table_country="Land";table_members="Leden";table_country_rac="L RAC";table_country_total="L Totaal";table_world_rac="W RAC";table_world_total="W Totaal";table_team="Team";table_lang_file="js/lib/data_tables/lang/nl.txt";text_credits="Punten";text_credits_future="Punten in de toekomst";text_solid_line="Doorgetrokken lijn: ";text_dash_line="Gestreepte lijn: ";
text_cedit_future="Punten in de toekomst ";text_tool_users="Toon gebruikers lijst";text_one_team="Team: ";text_all_teams="Alle teams";text_all_users="Alle gebruikers";text_all_countries="Alle landen";text_one_country="Land: ";text_table_info="Info";text_table_status="Status";txt_stat_head_zero="Status Zero Day update";txt_stat_head_all="Status dagelijkse update";txt_stat_head_user="Dagelijkse update gebruikers";txt_stat_head_team="Dagelijkse update team";txt_stat_head_post="Nabewerkingen";txt_stat_started=
"Gestart:";txt_stat_processed="Verwerkingstijd:";txt_stat_status="Status:";txt_stat_user="Gebruiker:";txt_stat_processed_nr="Verwerkt:";txt_stat_processed_last="Laatst verwerk:";txt_stat_error_zero="Fouten:";txt_stat_checked_time="Laatste controle:";txt_stat_error_user="Status / fouten gebruiker:";txt_stat_error_team="Status / fouten team:";txt_stat_error_all="Fouten totaal:";txt_stat_data_read="Data gelezen in:";txt_stat_data_processed="Data verwerkt in:";txt_stat_data_added="Data toegevoegd in";
txt_stat_data_time="Data van:";txt_processing_zero_wait="Wacht op de volgende update";txt_processing_zero_run="Loopt nu";txt_processing_users="Bezig met het verwerken gebruikers";txt_processing_teams="Bezig met het verwerken teams";txt_stat_post="Nog te doen:";txt_stat_busy="Nu bezig met:";txt_update_status1="Onderstaande info wordt over ";txt_update_stauts2=" seconden ververst";txt_update_now="Ververs ...";txt_todo_gen_lists="Genereer nieuwe lijsten";txt_progress_snl="Lijst S@NL wordt gemaakt";txt_progress_build_users=
"Lijst van gebruikers wordt gemaakt voor ";txt_progress_build_all_team="Lijst alle teams wordt gemaakt";txt_progress_build_all_country="Lijst alle landen wordt gemaakt";text_graph_first_time="<b>Klik op een van de rijen om de grafiek te laten zien</b>"};$(document).ready(function(){language();getSiteUrl();$("#button_home").click(function(){location.href="index.php"});""===g_siteUrl&&$("#text_status_error").html("g_siteUrl not found");$("#table_status_zero th").eq(1).html(txt_stat_head_zero);$("#table_status_zero td").eq(0).html(txt_stat_started);$("#table_status_zero td").eq(2).html(txt_stat_processed);$("#table_status_zero td").eq(4).html(txt_stat_status);$("#table_status_zero td").eq(6).html(txt_stat_user);$("#table_status_zero td").eq(8).html(txt_stat_processed_nr);
$("#table_status_zero td").eq(10).html(txt_stat_processed_last);$("#table_status_zero td").eq(12).html(txt_stat_error_zero);$("#table_status_all th").eq(1).html(txt_stat_head_all);$("#table_status_all td").eq(0).html(txt_stat_checked_time);$("#table_status_all td").eq(2).html(txt_stat_error_user);$("#table_status_all td").eq(4).html(txt_stat_error_team);$("#table_status_all td").eq(6).html(txt_stat_error_all);$("#table_status_user th").eq(1).html(txt_stat_head_user);$("#table_status_user td").eq(0).html(txt_stat_processed_last);
$("#table_status_user td").eq(2).html(txt_stat_data_read);$("#table_status_user td").eq(4).html(txt_stat_data_processed);$("#table_status_user td").eq(6).html(txt_stat_data_added);$("#table_status_user td").eq(8).html(txt_stat_data_time);$("#table_status_team th").eq(1).html(txt_stat_head_team);$("#table_status_team td").eq(0).html(txt_stat_processed_last);$("#table_status_team td").eq(2).html(txt_stat_data_read);$("#table_status_team td").eq(4).html(txt_stat_data_processed);$("#table_status_team td").eq(6).html(txt_stat_data_added);
$("#table_status_team td").eq(8).html(txt_stat_data_time);$("#table_status_post th").eq(1).html(txt_stat_head_post);$("#table_status_post td").eq(0).html(txt_stat_post);$("#table_status_post td").eq(2).html(txt_stat_processed_last);$("#table_status_post td").eq(4).html(txt_stat_data_processed);$("#table_status_post td").eq(6).html(txt_stat_busy);$("#table_status_post td").eq(8).html(txt_stat_error_all);DatabaseStatusStartTimer()});ACTION_READ_DATABASE_STATUS=0;ACTION_READ_DATABASE_ZERO_DAY_STATUS=1;g_database_status_interval_timer=null;g_database_zero_day_status_timer_count=g_database_status_timer_count=0;function DatabaseStatusStartTimer(){DatabaseZeroDayStatus();DatabaseStatus();g_database_zero_day_status_timer_count=g_database_status_timer_count=4;null===g_database_status_interval_timer&&(g_database_status_interval_timer=setInterval("DatabaseStatusTimer()",1E3))}
function DatabaseStatusTimer(){0>=g_database_status_timer_count?($("#text_status_update").html(txt_update_now),DatabaseStatus()):(100>g_database_status_timer_count&&$("#text_status_update").html(txt_update_status1+g_database_status_timer_count+txt_update_stauts2),g_database_status_timer_count--);0>=g_database_zero_day_status_timer_count?(DatabaseZeroDayStatus(),g_database_zero_day_status_timer_count=4):g_database_zero_day_status_timer_count--}
function DatabaseStatus(){g_database_status_timer_count=1E4;DatabaseStatusRead(DatabaseStatusReadReady)}function DatabaseStatusRead(a){phpSendData("{"+('"action":"'+ACTION_READ_DATABASE_STATUS+'", "id":"0","time":"0","token":"read"}'),a)}function DatabaseStatusReadReady(a){g_database_status_timer_count=15;try{var b=JSON.parse(a)}catch(c){return}a=b.shift();"data"===a&&(a=b.shift(),"ok"===a&&DatabasePrintStatus(b))}
function DatabasePrintStatus(a){a=a[0];var b="";"1"===a.todo&&(b=txt_todo_gen_lists);$("#text_status_todo").html(b);var c,b=PrintFullTime(a.progress_time);c=a.progress_text;switch(a.progress){case "1":c=txt_progress_snl;break;case "2":c=txt_progress_build_users+c;break;case "3":c=txt_progress_build_all_team;break;case "4":c=txt_progress_build_all_country;break;default:c=""}$("#text_status_progress").html(c);$("#text_status_progress_start").html(b);$("#text_status_progress_duration").html(a.progress_duration);
$("#text_status_progress_error").html(a.progress_error);$("#text_status_start").html(PrintFullTime(a.user_team_time));$("#text_status_user_start").html(PrintFullTime(a.user_start_time));$("#text_status_user_file_duration").html(a.user_file_read_duration);$("#text_status_user_processed_duration").html(a.user_processed_duration);$("#text_status_user_added_duration").html(a.user_add_duration);$("#text_status_user_url_time").html(PrintFullTimeUTC(3600*a.user_url_file_time));$("#text_status_team_start").html(PrintFullTime(a.team_start_time));
$("#text_status_team_file_duration").html(a.team_file_read_duration);$("#text_status_team_processed_duration").html(a.team_processed_duration);$("#text_status_team_added_duration").html(a.team_add_duration);$("#text_status_team_url_time").html(PrintFullTimeUTC(3600*a.team_url_file_time));$("#text_error_total").html(a.u_t_total_error_count);b=a.users_error_count;if(-1===b||"-1"===b)b=txt_processing_users;$("#text_error_user").html(b);a=a.team_error_count;if(-1===a||"-1"===a)a=txt_processing_teams;
$("#text_error_team").html(a)}function DatabaseZeroDayStatus(){g_database_zero_day_status_timer_count=1E4;DatabaseStatusZeroRead(DatabaseZeroDayStatusReadReady)}function DatabaseStatusZeroRead(a){phpSendData("{"+('"action":"'+ACTION_READ_DATABASE_ZERO_DAY_STATUS+'", "id":"0","time":"0","token":"read"}'),a)}
function DatabaseZeroDayStatusReadReady(a){g_database_zero_day_status_timer_count=4;try{var b=JSON.parse(a)}catch(c){return}a=b.shift();"data"===a&&(a=b.shift(),"ok"===a&&DatabaseZeroDayPrintStatus(b))}
function DatabaseZeroDayPrintStatus(a){var b,c=a[0];$("#text_zero_status_start").html(PrintFullTime(c.start_time));$("#text_zero_status_fetch").html(PrintFullTime(c.last_fetch_time));$("#text_zero_status_duration").html(c.duration);a=c.status;b=txt_processing_zero_wait;"1"===a&&(b=txt_processing_zero_run);$("#text_zero_status").html(b);$("#text_zero_status_user").html(c.user_name);$("#text_zero_status_processed").html(c.processed_count);a=c.error_count;b="-1"===a?"":a;$("#text_zero_error").html(b)}
function PrintFullTime(a){return(new Date(1E3*a)).toLocaleString()}function PrintFullTimeUTC(a){return(new Date(1E3*a)).toUTCString()};function phpSendData(a,b){var c=g_siteUrl+"/php/interface.php",d=new XMLHttpRequest;d.onreadystatechange=function(){4===d.readyState&&b(d.responseText)};d.open("POST",c,!0);d.setRequestHeader("X-File-Name","snl");d.setRequestHeader("Content-Type","application/json; charset=utf-8");d.timeout=1E4;d.send(a)}
function phpSendDataArg(a,b,c,d,f,g){var h=g_siteUrl+"/php/interface.php",e=new XMLHttpRequest;e.onreadystatechange=function(){4===e.readyState&&c(a,e.responseText,d,f,g)};e.open("POST",h,!0);e.setRequestHeader("X-File-Name","snl");e.setRequestHeader("Content-Type","application/json; charset=utf-8");e.timeout=1E4;e.send(b)};
